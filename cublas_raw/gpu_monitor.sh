#!/bin/bash

nvidia-smi --query-gpu=timestamp,name,gpu_uuid,pcie.link.width.current,persistence_mode,addressing_mode,vbios_version,inforom.pwr,inforom.oem,gom.current,fan.speed,pstate,clocks_event_reasons.active,clocks_event_reasons.gpu_idle,clocks_event_reasons.hw_slowdown,clocks_event_reasons.hw_thermal_slowdown,clocks_event_reasons.hw_power_brake_slowdown,clocks_event_reasons.sw_thermal_slowdown,clocks_event_reasons.sync_boost,memory.total,memory.reserved,memory.used,memory.free,utilization.gpu,utilization.memory,utilization.encoder,utilization.decoder,utilization.jpeg,temperature.gpu,temperature.memory,power.draw,power.draw.average,power.draw.instant,power.limit,enforced.power.limit,power.default_limit,clocks.gr,clocks.sm,clocks.mem,clocks.video,gsp.mode.current -lms 1 --format=csv -i 0 2>&1 > $1.csv
